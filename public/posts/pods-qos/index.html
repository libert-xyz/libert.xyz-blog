<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  PODS QoS · libert.xyz
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">


<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self' https://www.youtube.com; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdn.jsdelivr.net/; connect-src 'self' https://www.google-analytics.com;">




<meta name="author" content="Libert">
<meta name="description" content="
There is no option or field to assign Quality of service to a pod but a combination between Requests and Limits
give us the ability to define Quality of service.

  QoS Classes
  
    
    Link to heading
  


BestEffort class (no request and limits set)
Guaranteed class (requests are equal to limits)
Burstable class (one container has limit set but another don&rsquo;t)


Looking at QoS at the POD level is confusing because a POD can have one or multiple containers.">
<meta name="keywords" content="blog,devops,libert,aws,python,linux,bash">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="PODS QoS">
  <meta name="twitter:description" content="There is no option or field to assign Quality of service to a pod but a combination between Requests and Limits give us the ability to define Quality of service.
QoS Classes Link to heading BestEffort class (no request and limits set) Guaranteed class (requests are equal to limits) Burstable class (one container has limit set but another don’t) Looking at QoS at the POD level is confusing because a POD can have one or multiple containers.">

<meta property="og:url" content="http://localhost:1313/posts/pods-qos/">
  <meta property="og:site_name" content="libert.xyz">
  <meta property="og:title" content="PODS QoS">
  <meta property="og:description" content="There is no option or field to assign Quality of service to a pod but a combination between Requests and Limits give us the ability to define Quality of service.
QoS Classes Link to heading BestEffort class (no request and limits set) Guaranteed class (requests are equal to limits) Burstable class (one container has limit set but another don’t) Looking at QoS at the POD level is confusing because a POD can have one or multiple containers.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-08-27T18:47:59-04:00">
    <meta property="article:modified_time" content="2019-08-27T18:47:59-04:00">
    <meta property="article:tag" content="Kubernetes">
    <meta property="article:tag" content="Docker">
      <meta property="og:see_also" content="http://localhost:1313/posts/pod-services-pt2/">
      <meta property="og:see_also" content="http://localhost:1313/posts/namespaces-quotas/">
      <meta property="og:see_also" content="http://localhost:1313/posts/pods-requests-limits/">
      <meta property="og:see_also" content="http://localhost:1313/posts/kubernetes-ha/">
      <meta property="og:see_also" content="http://localhost:1313/posts/pod-services/">
      <meta property="og:see_also" content="http://localhost:1313/posts/pod-networking/">
      <meta property="og:see_also" content="http://localhost:1313/posts/namespaces-quotas/">
      <meta property="og:see_also" content="http://localhost:1313/posts/pods-requests-limits/">




<link rel="canonical" href="http://localhost:1313/posts/pods-qos/">


<link rel="preload" href="http://localhost:1313/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="http://localhost:1313/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="http://localhost:1313/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="http://localhost:1313/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="http://localhost:1313/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="http://localhost:1313/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="http://localhost:1313/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="http://localhost:1313/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="http://localhost:1313/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:1313/images/apple-touch-icon.png">

<link rel="manifest" href="http://localhost:1313/site.webmanifest">
<link rel="mask-icon" href="http://localhost:1313/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      libert.xyz
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="http://localhost:1313/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="http://localhost:1313/open-source/">Open Source Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="http://localhost:1313/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/pods-qos/">
              PODS QoS
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2019-08-27T18:47:59-04:00">
                August 27, 2019
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              2-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="http://localhost:1313/tags/kubernetes/">Kubernetes</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="http://localhost:1313/tags/docker/">Docker</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <hr>
<p>There is no option or field to assign Quality of service to a pod but a combination between <strong>Requests</strong> and <strong>Limits</strong>
give us the ability to define Quality of service.</p>
<h3 id="qos-classes">
  QoS Classes
  <a class="heading-link" href="#qos-classes">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li><em>BestEffort</em> class (no request and limits set)</li>
<li><em>Guaranteed</em> class (requests are equal to limits)</li>
<li><em>Burstable</em> class (one container has limit set but another don&rsquo;t)</li>
</ul>
<p><img src="http://localhost:1313/images/qos1.png" alt="targets"></p>
<p>Looking at QoS at the POD level is confusing because a POD can have one or multiple containers.</p>
<h3 id="qos-class-of-a-single-container-pod">
  QoS class of a single container POD
  <a class="heading-link" href="#qos-class-of-a-single-container-pod">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: center">CPU requests / limits</th>
          <th style="text-align: center">Memory requests / limits</th>
          <th style="text-align: center">Container QoS class</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">None set</td>
          <td style="text-align: center">None set</td>
          <td style="text-align: center">BestEffort</td>
      </tr>
      <tr>
          <td style="text-align: center">None set</td>
          <td style="text-align: center">Requests &lt; Limits</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">None set</td>
          <td style="text-align: center">Requests = Limits</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">Requests &lt; Limits</td>
          <td style="text-align: center">None set</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">Requests &lt; Limits</td>
          <td style="text-align: center">Requests &lt; Limits</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">Requests &lt; Limits</td>
          <td style="text-align: center">Requests = Limits</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">Requests = Limits</td>
          <td style="text-align: center">Requests = Limits</td>
          <td style="text-align: center">Guaranteed</td>
      </tr>
  </tbody>
</table>
<p><em>If only requests are set, but not limits, refer to the table rows where
requests are less than the limits. If only limits are set, requests default to the
limits, so refer to the rows where requests equal limits.</em></p>
<h3 id="qos-class-of-a-pod-with-multiple-containers">
  QoS class of a POD with multiple containers
  <a class="heading-link" href="#qos-class-of-a-pod-with-multiple-containers">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>For multi-container pods, if all the containers have the same QoS class, that’s also the pod’s QoS class.
If at least one container has a different class, the pod’s QoS class is <em>Burstable</em>.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">Container 1 QoS class</th>
          <th style="text-align: center">Container 2 QoS class</th>
          <th style="text-align: center">POD&rsquo;s QoS class</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">BestEffort</td>
          <td style="text-align: center">BestEffort</td>
          <td style="text-align: center">BestEffort</td>
      </tr>
      <tr>
          <td style="text-align: center">BestEffort</td>
          <td style="text-align: center">Burstable</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">BestEffort</td>
          <td style="text-align: center">Guaranteed</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">Burstable</td>
          <td style="text-align: center">Burstable</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">Burstable</td>
          <td style="text-align: center">Guaranteed</td>
          <td style="text-align: center">Burstable</td>
      </tr>
      <tr>
          <td style="text-align: center">Guaranteed</td>
          <td style="text-align: center">Guaranteed</td>
          <td style="text-align: center">Guaranteed</td>
      </tr>
  </tbody>
</table>
<h3 id="which-process-gets-killed-when-memory-is-low">
  Which process gets killed when memory is low?
  <a class="heading-link" href="#which-process-gets-killed-when-memory-is-low">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The QoS classes determine which container gets killed first.
Killing order by QoS class:</p>
<ol>
<li><em>BestEffort</em></li>
<li><em>Burstable</em></li>
<li><em>Guaranteed</em></li>
</ol>
<p>When the node’s memory is already maxed out and one of the processes on the node tries to allocate more memory, the system will need to kill one of the processes.</p>
<p><img src="http://localhost:1313/images/qos2.png" alt="targets"></p>
<p>Sources:</p>
<p><a href="https://www.manning.com/books/kubernetes-in-action"  class="external-link" target="_blank" rel="noopener">https://www.manning.com/books/kubernetes-in-action</a></p>
<hr>

      </div>


      <footer>
        

<section class="see-also">
  
    
    
    
      <h3 id="see-also-in-kubernetes">
        See also in kubernetes
        <a class="heading-link" href="#see-also-in-kubernetes">
          <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
          <span class="sr-only">Link to heading</span>
        </a>
      </h3>
      <nav>
        <ul>
        
        
          
            <li>
              <a href="http://localhost:1313/posts/pod-services-pt2/">Kubernetes Services insights Pt2</a>
            </li>
          
        
          
            <li>
              <a href="http://localhost:1313/posts/namespaces-quotas/">Namespaces resources quotas</a>
            </li>
          
        
          
        
          
            <li>
              <a href="http://localhost:1313/posts/pods-requests-limits/">PODS Requests &amp; Limits</a>
            </li>
          
        
          
            <li>
              <a href="http://localhost:1313/posts/kubernetes-ha/">Highly Available Kubernetes Cluster</a>
            </li>
          
        
          
            <li>
              <a href="http://localhost:1313/posts/pod-services/">Kubernetes Services insights</a>
            </li>
          
        
        </ul>
      </nav>
    
  
    
    
    
      <h3 id="see-also-in-qos">
        See also in QoS
        <a class="heading-link" href="#see-also-in-qos">
          <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
          <span class="sr-only">Link to heading</span>
        </a>
      </h3>
      <nav>
        <ul>
        
        
          
            <li>
              <a href="http://localhost:1313/posts/namespaces-quotas/">Namespaces resources quotas</a>
            </li>
          
        
          
        
          
            <li>
              <a href="http://localhost:1313/posts/pods-requests-limits/">PODS Requests &amp; Limits</a>
            </li>
          
        
        </ul>
      </nav>
    
  
</section>


        
        
        
        
        
        
        
      </footer>
    </article>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body,
      {
        delimiters: [
          {left: '$$', right: '$$', display:true},
          {left: '$', right: '$', display:false},
          {left: '\\(', right: '\\)', display: false},
          {left: '\\[', right: '\\]', display: true}
        ]
      }
    );"></script>
  </section>

    </div>

  </main>

  

  
  
  <script src="http://localhost:1313/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
